# Synthetic Bank Statement Generator

This project generates **synthetic bank statements** mimicking real-world financial documents, enabling innovation in financial data processing while preserving privacy. By combining Large Language Models (LLMs), synthetic data generation, and HTML templating, it produces realistic PDF statements for **learning, development, and testing** in controlled environments.

**Important**: The synthetic data generated is strictly for **learning and development purposes** and must not be used for fraudulent activities or real-world financial applications.

![image](https://github.com/user-attachments/assets/21b75450-4d19-4c1e-a3a2-503a25b47d42)


## Why Synthetic Bank Statements?
- **Privacy Protection**: Enables developers to work with realistic financial data without sensitive information.
- **Innovation**: Supports financial tools, machine learning models, and data processing pipelines.
- **Realism**: Produces structurally diverse statements with authentic layouts, transaction patterns, and branding.

## Project Objectives
This project addresses three key challenges:
1. **Realistic and Diverse Data**: Uses LLMs (Mistral via Ollama) and Faker to generate varied transaction descriptions (e.g., "Grocery Store Purchase") and account details (names, addresses, account numbers).
2. **Authentic Formatting**: Renders statements in HTML with Jinja2 templates and converts to PDFs using wkhtmltopdf, replicating real-world bank statement layouts.
3. **Scalable Templates**: Supports 10 unique templates with distinct layouts, enabling adaptation for various bank formats (e.g., Chase, Wells Fargo).

## Approach and Implementation
### Research
- Analyzed real-world bank statements from Chase, Citibank, Wells Fargo, and PNC to understand layouts, fonts, and structural elements like headers, footers, and transaction tables. Statements were sourced from anonymized images provided by friends or found via internet image searches.
- Studied challenges in OCR and table extraction, such as misaligned columns, varied fonts, and noise (e.g., watermarks, disclaimers).
- Explored synthetic data generation techniques to mimic transaction patterns and edge cases like negative balances or missing fields.

### Tools and Libraries
- **Data Generation**: `Faker` for account details (names, addresses, account numbers); `Mistral` (via Ollama) for realistic transaction descriptions and categories in the full version. The demo uses static transaction descriptions.
- **Templating**: `Jinja2` for HTML templates, enabling dynamic data insertion and layout variability.
- **PDF Generation**: `wkhtmltopdf` to convert HTML to PDFs.
- **Data Processing**: `pandas` for transaction table management; `pydantic` for data validation.
- **External Tools**: Base64-encoded logos embedded in templates to replicate branding.
- **Template Creation**: ChatGPT and Grok for generating HTML versions of bank statement layouts from images, leveraging their superior image recognition capabilities compared to traditional OCR. Hyper-realistic templates required manual HTML refinements alongside AI adjustments.

### Variability and Realism
- Created **10 unique HTML templates**, each with distinct layouts:
  - Four hyper-realistic templates (Chase, PNC, Wells Fargo, Citi) with `_classic` in the file names, closely mimicking actual bank statement designs sourced from anonymized images. These required iterative collaboration, with manual HTML edits refined alongside Grok and ChatGPT to achieve high fidelity.
  - Six non-realistic templates generated by Grok and ChatGPT, designed to highlight the limitations of current AI models in accurately reproducing complex bank statement layouts. These creative structures test diverse layouts and edge cases not based on real-world statements.
  - Varied column names (e.g., "Transaction Date" vs. "Date", "Amount" vs. "Value").
  - Different fonts (Arial, Times New Roman, Helvetica) and sizes.
  - Bank specific footers, headers, and summaries (e.g., account summary tables, promotional text).
  - Multiple currencies (USD, EUR, GBP) and amount formats (e.g., $1,234.56 vs. 1234.56).
  - Single-page and multi-page statements to test pagination.
- Non-realistic templates contain **noise** to challenge downstream processing:
- Ensured realism in hyper-realistic templates by modeling transaction patterns and layouts after real statements (e.g., recurring deposits, varied merchant names). Non-realistic templates, generated by Grok and ChatGPT, intentionally showcase AI limitations while introducing unconventional layouts to rigorously test AI pipeline robustness.

## Example Outputs
- [Statement 1: Classic Chase Layout (Hyper-Realistic)](https://github.com/ch4444rlie/SyntheticBank/blob/master/synthetic_statements/bank_statement_BROWN-JONES_chase_chase_mail_style.pdf)
- [Statement 2: Classic PNC Layout (Hyper-Realistic)](https://github.com/ch4444rlie/SyntheticBank/blob/master/synthetic_statements/bank_statement_BROWN-JONES_pnc_pnc_main.pdf)
- [Statement 3: Classic Wells Fargo Layout (Hyper-Realistic)](https://github.com/ch4444rlie/SyntheticBank/blob/master/synthetic_statements/bank_statement_BROWN-JONES_wellsfargo_wells_fargo_classic.pdf)
- Additional statements (4–10) in `synthetic_statements/` with unique layouts, including one hyper-realistic Citi template (noted as `_classic`, refined through manual HTML edits and AI collaboration) and six non-realistic variations generated by Grok and ChatGPT to demonstrate AI limitations in replicating complex bank statement designs.

*Note*: These are synthetic and not real financial data.

### Methods and Final Approach
- Initially considered OCR for extracting layouts from statement images but found ChatGPT and Grok’s image recognition more effective for generating accurate HTML templates, as they better handled complex layouts and visual noise.
- Experimented with `reportlab` for PDF generation but chose `wkhtmltopdf` with HTML templating for greater layout flexibility.
- Selected Mistral for local deployment and efficiency.
- Adopted Jinja2 templating for its ability to support diverse layouts and scalability for additional bank formats.

### Potential Improvements
- Add scanned document effects (e.g., skew, noise) using `Pillow` to further test OCR robustness.
- Expand template variety to include mobile app-style or legacy formats.
- Implement a configuration file to parameterize layout options (e.g., font, currency) for easier customization.
- Integrate automated testing to validate PDF structure against processing pipeline requirements.

### Scalability and Reusability
- Modular pipeline allows new templates to be added by creating additional HTML files.
- Parameterized data generation (e.g., transaction count, currency) supports customization.
- Code is documented and structured for reuse in other synthetic data projects (see `final_chase_generator.ipynb`).

## Deliverables
1. **10 Synthetic Bank Statement PDFs**:
   - Each with a unique layout, available in the `synthetic_statements/` directory.
   - Examples include varied column structures, fonts, currencies, and noise elements.
2. **Documentation**: This README details the approach, tools, and implementation.
3. **Code and Tooling**: The Jupyter Notebook (`final_chase_generator.ipynb`) and Streamlit app (`app/main.py`) provide a reusable generator script.

## Current Pipeline
1. **Template Creation**:
   - 10 HTML templates across four banks, created using Jinja2. Hyper-realistic `_classic` templates for Chase, Citibank, Wells Fargo, and PNC were developed with manual HTML edits and Grok/ChatGPT refinements based on real statement images. Non-realistic `_variation_1` and `_variation_2` templates for Chase, Citibank, and Wells Fargo were generated by Grok and ChatGPT to demonstrate AI limitations.
   - Placeholders for dynamic fields (e.g., transactions, account details) and static elements (e.g., logos).
2. **Synthetic Data Generation**:
   - `Faker` generates account holder details; `Mistral` (via Ollama) creates transaction descriptions in the full version. The demo uses static transaction descriptions for simplicity.
   - Data stored in `pandas` DataFrames for processing.
3. **Output Formatting**:
   - Jinja2 populates templates with data; `wkhtmltopdf` converts to PDFs.
   - Base64-encoded logos ensure branding consistency.

## Demo and Full Capabilities
### Try the Demo
A public demo is available on Streamlit Cloud: [**Synthetic Bank Statement Demo**](https://syntheticbank-jcemrxxikd4pgxqdkwf46j.streamlit.app/)
- Generate statements with 3–12 transactions and select from 10 templates across Chase, Citibank, Wells Fargo, and PNC.
- Download as PDF via browser.
- Uses static transaction descriptions and simplified logic, excluding LLM-driven data generation (Mistral via Ollama) for accessibility.
- Designed for non-technical users to preview outputs without local setup.

### Full Capabilities
Run locally for:
- Dynamic transaction descriptions via Mistral (Ollama).
- Direct PDF generation with `wkhtmltopdf` for all templates per bank.
- Access to all 10 templates, including hyper-realistic `_classic` and non-realistic `_variation_1` and `_variation_2`.
**Setup**:
1. Install Ollama and Mistral: [Ollama Guide](https://ollama.ai/download), `ollama pull mistral:7b-instruct-v0.3-q4_0`.
2. Install `wkhtmltopdf`: [Downloads](https://wkhtmltopdf.org/downloads.html).
3. Install dependencies: `pip install -r requirements.txt`
4. See pyproject.toml for all dependencies

## Requirements
- **Demo**: No local setup required.
- **Full Version**:
  - Python 3.13+
  - Libraries: `faker`, `pandas`, `ollama`, `jinja2`, `pdfkit`, `pydantic`
  - External: wkhtmltopdf
  - See requirements.txt and pyproject.toml

## Getting Started
1. **Prerequisites**:
   - Install Python 3.13+.
   - For full version: Install wkhtmltopdf, dependencies, and place logo/templates in `sample_logos/` and `templates/`.
2. **Running**:
   - Use `final_chase_generator.ipynb` for full generation.
   - Run Streamlit app: `streamlit run app/main.py`.
